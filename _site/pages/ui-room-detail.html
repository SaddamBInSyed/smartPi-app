<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Room - Your awesome title</title> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css"> <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Room | Your awesome title</title> <meta name="generator" content="Jekyll v3.8.6" /> <meta property="og:title" content="Room" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <link rel="canonical" href="http://localhost:4000/pages/ui-room-detail.html" /> <meta property="og:url" content="http://localhost:4000/pages/ui-room-detail.html" /> <meta property="og:site_name" content="Your awesome title" /> <script type="application/ld+json"> {"description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","@type":"WebPage","url":"http://localhost:4000/pages/ui-room-detail.html","headline":"Room","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000" class="site-title lh-tight"> Your awesome title </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item active"><a href="http://localhost:4000/404.html" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="http://localhost:4000/" class="navigation-list-link">SmartPi</a></li><li class="navigation-list-item"><a href="http://localhost:4000/pages/appdesign.html" class="navigation-list-link">Design of the application</a></li><li class="navigation-list-item active"><a href="http://localhost:4000/pages/ui.html" class="navigation-list-link">User interface</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/pages/ui-auth.html" class="navigation-list-link">Login and registration</a></li><li class="navigation-list-item "><a href="http://localhost:4000/pages/ui-first-usage.html" class="navigation-list-link">First usage</a></li><li class="navigation-list-item "><a href="http://localhost:4000/pages/ui-home.html" class="navigation-list-link">Home</a></li><li class="navigation-list-item active"><a href="http://localhost:4000/pages/ui-room-detail.html" class="navigation-list-link active">Room</a></li><li class="navigation-list-item "><a href="http://localhost:4000/pages/ui-camera.html" class="navigation-list-link">Camera</a></li><li class="navigation-list-item "><a href="http://localhost:4000/pages/ui-profile-recap.html" class="navigation-list-link">Profile</a></li></ul></li><li class="navigation-list-item"><a href="http://localhost:4000/pages/backend.html" class="navigation-list-link">Backend</a></li><li class="navigation-list-item"><a href="http://localhost:4000/pages/about.html" class="navigation-list-link">About</a></li><li class="navigation-list-item"><a href="http://localhost:4000/pages/references.html" class="navigation-list-link">References</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Your awesome title" aria-label="Search Your awesome title" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/pages/ui.html">User interface</a></li> <li class="breadcrumb-nav-list-item"><span>Room</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <h1 id="room-details"> <a href="#room-details" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Room details </h1> <p><img align="right" width="200" height="200" src="../images/ui-room.png" /> Once the user click on a particular room, this is the view presenting the devices of the room. Here the user can select one device, depending what he or she would like to do. For our application we actually implemented only the camera, so the other device are simply *unavailable**; however the application can be extended for instance to control some lights in the room, actually this functionality will be probably included in one next version.</p> <h2 id="room-detail-fragment"> <a href="#room-detail-fragment" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Room detail fragment </h2> <p>In our code the fragment holding the room is called RoomDetailFragment, that hosts a recycler view with a <strong>grid layout</strong> to display the devices:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Set the GridLayout</span>
<span class="n">val</span> <span class="n">manager</span> <span class="o">=</span> <span class="nc">GridLayoutManager</span><span class="o">(</span><span class="n">activity</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>
<span class="n">binding</span><span class="o">.</span><span class="na">deviceList</span><span class="o">.</span><span class="na">layoutManager</span> <span class="o">=</span> <span class="n">manager</span>

<span class="c1">// Change the view</span>
<span class="c1">// Add the room name</span>
<span class="n">binding</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="n">roomName</span>
<span class="n">binding</span><span class="o">.</span><span class="na">labelDevices</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="n">deviceLabel</span>

<span class="c1">// Get the devices of the room</span>
<span class="n">roomDetailViewModel</span><span class="o">.</span><span class="na">getDevices</span><span class="o">(</span><span class="n">homeId</span><span class="o">,</span><span class="n">roomId</span><span class="o">)</span>

<span class="c1">// Pass the devices to the adapter</span>
<span class="n">roomDetailViewModel</span><span class="o">.</span><span class="na">_devices</span><span class="o">.</span><span class="na">observe</span><span class="o">(</span><span class="n">viewLifecycleOwner</span><span class="o">,</span> <span class="nc">Observer</span> <span class="o">{</span>
    <span class="n">it</span><span class="o">?.</span><span class="na">let</span> <span class="o">{</span>
        <span class="n">adapter</span><span class="o">.</span><span class="na">submitList</span><span class="o">(</span><span class="n">it</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">})</span>
</code></pre></div></div> <p>In the above code we set the grid layout, we assign the room name, the subtitle (the label), and we call the function from the view model in order to get the devices from the real-time database, so we observe the variable <strong>_devices</strong> that is a Mutable LiveData, holding all the devices of the room and once the data is ready we assign the list to the adapter.</p> </div> </div> </div> </div> </body> </html>
